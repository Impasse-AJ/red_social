{% extends 'base.html.twig' %}

{% block title %}Perfil de {{ usuario.nombreUsuario }}{% endblock %}

{% block body %}
    <h1>Perfil de {{ usuario.nombreUsuario }}</h1>

    {% if usuario.fotoPerfil %}
        <img src="{{ asset('uploads/' ~ usuario.fotoPerfil) }}" alt="Foto de perfil" width="150">
    {% endif %}
    {% if propietario %}
        <a href="{{ path('subir_foto_perfil', { id: usuario.id }) }}">üì∏ Subir Foto</a>
    {% endif %}
    
    {% if propietario %}
        <a href="{{ path('editar_perfil', { id: usuario.id }) }}">‚úèÔ∏è Editar Perfil</a>
    {% endif %}

    <h2>Publicaciones</h2>
    {% if propietario %}
        <h3>Publicar nuevo mensaje</h3>
        <form method="POST" action="{{ path('nueva_publicacion', { id: usuario.id }) }}">
            <textarea name="contenido" required placeholder="Escribe algo..."></textarea><br>
            <button type="submit">Publicar</button>
        </form>
    {% endif %}

    {% if publicaciones is empty %}
        <p>No hay publicaciones a√∫n.</p>
    {% else %}
        <ul>
            {% for publicacion in publicaciones %}
                <li>
                    <p>{{ publicacion.contenido }}</p>
                    <small>Publicado el {{ publicacion.fechaCreacion|date('d/m/Y H:i') }}</small>
                    
                    {% if propietario %}
                        <form method="POST" action="{{ path('eliminar_publicacion', { id: publicacion.id }) }}">
                            <button type="submit" onclick="return confirm('¬øSeguro que quieres eliminar esta publicaci√≥n?')">‚ùå Eliminar</button>
                        </form>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}
